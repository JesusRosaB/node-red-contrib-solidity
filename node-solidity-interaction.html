<script type="text/javascript">

  RED.nodes.registerType('solidity-interaction', {
    category: 'Solidity',
    color: '#E8E4F3',
    defaults: {
      name: { value: undefined },
      config: { type: 'blockchain-config', required: true },
      smartcontract: { type: 'smartcontract-config', required: true },
      scnamefunction: { value: undefined, required: true },
      ispurefunction: { value: undefined, required: false }
    },
    inputs: 1,
    outputs: 1,
    icon: 'solidity.svg',
    align: 'left',
    paletteLabel: 'solidity-interaction',
    hasValue: true,
    label: function() {
      return this.name || 'Solidity Interaction';
    }
    

  });
</script>
<style>
  h4.section {
    border-bottom: 1px solid #bbb;
    margin: 1em 0em 1em 0em;
  }
</style>
<script type="text/x-red" data-template-name="solidity-interaction">

    <h4 class="section">General</h4>

    <div class="form-row">
        <label for="node-input-name"> Name [optional]</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    
    <div class="form-row">
    	<label for="node-input-config"> Configuration </label>
    	<input type="text" id="node-input-config">
    </div>

    <h4 class="section">Smart Contract</h4>
    
    <div class="form-row">
    	<label for="node-input-smartcontract"> Smart Contract </label>
    	<input type="text" id="node-input-smartcontract">
    </div>

    <h4 class="section">Smart Contract Function</h4>
    <div class="form-row">
        <label for="node-input-scnamefunction"> Function Name </label>
        <input type="text" id="node-input-scnamefunction" placeholder="Function Name">
    </div>

    <div class="form-row">
      <label for="node-input-ispurefunction"> Pure Function </label>
      <input type="checkbox" id="node-input-ispurefunction">
    </div>
</script>

<script type="text/html" data-help-name="solidity-interaction">
  <p> Interaction process with a smart contract already deployed in a blockchain network.</p>
  <ul>
    <li><b>Input: </b>Data in JSON format with the necessary parameters to interact with the desired smart contract function. Note that not all smart contract functions need parameters.</li>
    <li><b>Configuration:</b> Select the configuration node where the network and private key are specified.</li>
    <li><b>Smart Contract: </b>Select the smart contract to deploy in the selected network.</li>
    <li><b>Function Name: </b>Indicates the name of the smart contract function already deployed in the blockchain network with which you want to interact.</li>
    <li><b>Pure Function: </b>Ensure that the contract function not read or modify the state of the blockchain network.</li>
    <li><b>Output: </b>Result of the smart contract interaction process. If the interaction has been successful, then all details of the completed transaction will be displayed. It is placed on <code>msg.payload</code>.</li>
  </ul>
</script>